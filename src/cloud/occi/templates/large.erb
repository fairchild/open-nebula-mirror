NAME   = <%= @vm_info['NAME']%>

CPU    = 8
MEMORY = 8192

OS = [ kernel     = /vmlinuz,
       initrd     = /initrd.img,
       root       = sda1,
       kernel_cmd = "ro xencons=tty console=tty1"]
<% @vm_info['STORAGE'].each do |key, image| 
   
case key
    
    when "SWAP" 
%>
DISK = [ type = "swap", 
         size=<%= image['size']%>, 
         dev=<%= image['dev']%> ]
<% 
    when "DISK"  
%>
DISK = [ type = "disk", 
         dev=<%= image['dev']%>, 
         source=<%= image['source']%>, 
         image_id=<%= image['image']%> ]
<% 
    when "FS"  
%>
DISK = [ type = "fs", 
         dev=<%= image['dev']%>, 
         size=<%= image['size']%>,
         format=<%= CONFIG[:fs_format]||"ext3"%>  ]   
<% end %>
<% end %>
<% @vm_info['NETWORK']['NIC'].each do |nic| %>
NIC = [ 
<% if nic['ip'] %>
        IP=<%= nic['ip'] %>,
<% end %>
        NETWORK=<%= nic['network']%>, 
        NETWORK_ID=<%= nic['network_id'] %>      
]
<% end %>
OCCI_SIZE_TYPE = <%= @vm_info[:instance_type ]%>

